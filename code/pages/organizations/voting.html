<webc-container controller="organizations/VotingController">
    <link href="/assets/css/main.css" rel="stylesheet">

    <div class="bpd-header">
        <label>Sign out</label>
    </div>

    <psk-card class="bpd-sub-header">
        <label>{{@organization.name}}</label>
        <label>{{@cluster.name}}</label>
    </psk-card>

    <psk-card class="bpd-dashboard bpd-tabs">
        <label class="bpd-dashboard-title">Referendum</label>

        <psk-tab-navigator default="1">

            <psk-tab title="Create">
                <div class="bpd-row">
                    <div class="d-flex flex-column justify-content-center mb-3">
                        <div class="form-group flex-column">
                            <label>{{@questionCreationModel.title.label}}</label>
                            <input class="form-control bpd-input bpd-question-title"
                                   data-view-model="@questionCreationModel.title"/>
                        </div>

                        <div class="form-group flex-column">
                            <label>{{@questionCreationModel.signature.label}}</label>
                            <input class="form-control bpd-input bpd-question-title"
                                   data-view-model="@questionCreationModel.signature"/>
                        </div>
                    </div>

                    <div data-for="@questionCreationModel.answers">
                        <div class="form-group flex-column">
                            <label>{{@questionCreationModel.signature.label}}</label>
                            <input class="form-control bpd-input" data-view-model="@"/>
                        </div>
                    </div>

                    <div class="bpd-for-each-row my-3">
                        <button class="btn btn-info btn-sm" data-tag="answer:create">Add Answer</button>
                    </div>

                    <div class="bpd-for-each-row d-flex justify-content-center mb-3">
                        <psk-checkbox view-model="@questionCreationModel.uniqueAnswers"></psk-checkbox>
                        <button class="btn btn-primary" data-tag="question:create">Create question</button>
                    </div>
                </div>
            </psk-tab>

            <psk-tab title="Respond">
                <div class="bpd-row">
                    <div data-for="@cluster.questions">
                        <div class="bpd-for-each-row">
                            <label>{{@title}}</label>
                        </div>
                        <div class="bpd-for-each-row">
                            <div data-if="@uniqueAnswers">
                                <psk-radio-group data-view-model="@answerRadioGroup" slot="true"></psk-radio-group>

                                <div data-for="@answers" slot="false">
                                    <psk-checkbox data-view-model="@"></psk-checkbox>
                                </div>
                            </div>
                        </div>

                        <psk-card slot="no-data"
                                  title="No questions were submitted."></psk-card>
                    </div>

                    <div data-if="@hasQuestions">
                        <div class="bpd-for-each-row">
                            <button class="btn btn-sm btn-success" data-tag="voting:respond">
                                <psk-icon color="rgb(255, 255, 255)" icon="check"></psk-icon>
                                Finish
                            </button>
                        </div>
                    </div>
                </div>
            </psk-tab>

            <psk-tab title="Results">
                <psk-card class="bpd-row">

                    <div data-for="@cluster.responses">
                        <div class="bpd-for-each-row">
                            <label>{{@question.title}}</label>
                        </div>
                        <div class="bpd-for-each-row">
                            <div data-for="@answerResults">
                                <psk-progress data-view-model="@"></psk-progress>
                                <psk-card slot="no-data"
                                          title="No responses were submitted for this question."></psk-card>

                            </div>
                        </div>
                        <div class="bpd-for-each-row">
                            <button class="btn btn-primary" data-tag="result:apply">Apply to Smart Contract</button>
                        </div>

                        <psk-card slot="no-data"
                                  title="No questions were submitted."></psk-card>
                    </div>

                </psk-card>
            </psk-tab>
        </psk-tab-navigator>
        <psk-list-feedbacks messages-to-display="5" time-alive="3000"></psk-list-feedbacks>
    </psk-card>
</webc-container>
