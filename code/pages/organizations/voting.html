<webc-container controller="organizations/VotingController">
    <link href="/assets/css/main.css" rel="stylesheet">
    <link href="/assets/css/progress.css" rel="stylesheet">

    <div class="bpd-header">
        <label>Sign out</label>
    </div>

    <psk-card class="bpd-sub-header">
        <label>{{@organization.name}}</label>
        <label>{{@cluster.name}}</label>
    </psk-card>

    <psk-card class="bpd-dashboard bpd-tabs">
        <label class="bpd-dashboard-title">Referendum</label>

        <psk-tab-navigator default="1">

            <psk-tab title="Create">
                <div class="bpd-row">
                    <div class="mb-3 question-wrapper">
                        <div class="form-group flex-column">
                            <label>{{@questionCreationModel.title.label}}</label>
                            <input class="form-control bpd-input"
                                   data-view-model="@questionCreationModel.title"/>
                        </div>

                        <div class="form-group flex-column">
                            <label>{{@questionCreationModel.signature.label}}</label>
                            <input class="form-control bpd-input"
                                   data-view-model="@questionCreationModel.signature"/>
                        </div>
                    </div>

                    <label class="bpd-dashboard-title my-2 d-flex justify-content-center">Answers</label>
                    <div class="answers-wrapper" data-for="@questionCreationModel.answers">
                        <input class="form-control bpd-input" data-view-model="@"/>
                    </div>

                    <div class="bpd-for-each-row my-3">
                        <button class="btn btn-info btn-sm" data-tag="answer:create">Add Answer</button>
                    </div>

                    <div class="bpd-for-each-row d-flex justify-content-center mb-3">
                        <div class="form-check">
                            <input class="form-check-input" data-view-model="@questionCreationModel.uniqueAnswers"
                                   id="uniqueAnswer" type="checkbox">
                            <label class="form-check-label" for="uniqueAnswer">Unique answer</label>
                        </div>
                        <button class="btn btn-primary" data-tag="question:create">Create question</button>
                    </div>
                </div>
            </psk-tab>

            <psk-tab title="Respond">
                <div class="bpd-row">
                    <div data-for="@cluster.questions">
                        <div class="bpd-for-each-row">
                            <label class="bpd-dashboard-title">{{@title}}</label>
                        </div>
                        <div class="bpd-for-each-row" data-if="@uniqueAnswers">
                            <fieldset class="form-group d-flex justify-content-center align-items-center"
                                      data-for="@answers" id="@id" slot="true">
                                <div class="form-check">
                                    <input class="form-check-input" data-view-model="@checkInput" type="radio">
                                    <label class="form-check-label" data-view-model="@label">
                                        {{@label.text}}
                                    </label>
                                </div>
                            </fieldset>

                            <div class="d-flex justify-content-center align-items-center" data-for="@answers"
                                 slot="false">
                                <div class="form-check">
                                    <input class="form-check-input" data-view-model="@checkInput" type="checkbox">
                                    <label class="form-check-label" data-view-model="@label">{{@label.text}}</label>
                                </div>
                            </div>
                        </div>

                        <label class="info" slot="no-data">No questions were submitted.</label>
                    </div>

                    <div data-if="@hasQuestions">
                        <div class="bpd-for-each-row">
                            <button class="btn btn-sm btn-success" data-tag="voting:respond">
                                <span class="icon fa fa-check" style="color: rgb(255, 255, 255);"></span>
                                Finish
                            </button>
                        </div>
                    </div>
                </div>
            </psk-tab>

            <psk-tab title="Results">
                <div class="bpd-row">

                    <div data-for="@cluster.responses">
                        <div class="bpd-for-each-row">
                            <label class="bpd-dashboard-title">{{@question.title}}</label>
                        </div>
                        <div class="bpd-for-each-row">
                            <div class="d-flex justify-content-center align-items-center" data-for="@answerResults">
                                <div class="bpd-progress">
                                    <label class="bpd-dashboard-title">{{@label}}</label>
                                    <div class="d-flex justify-content-center align-items-center">
                                        <label class="over-the-progress">{{@value}}%</label>
                                        <progress data-color="@color" max="100" value="@value"></progress>
                                    </div>
                                </div>
                                <label class="info" slot="no-data">No responses were submitted for this
                                    question.</label>

                            </div>
                        </div>
                        <div class="bpd-for-each-row">
                            <button class="btn btn-primary" data-tag="result:apply">Apply to Smart Contract</button>
                        </div>

                        <label class="info" slot="no-data">No questions were submitted.</label>
                    </div>
                </div>
            </psk-tab>
        </psk-tab-navigator>
        <psk-list-feedbacks messages-to-display="5" time-alive="3000"></psk-list-feedbacks>
    </psk-card>
</webc-container>
